<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Virendra EL-Karim | TikTok Downloader</title>
<meta name="description" content="Download video TikTok tanpa watermark secara gratis.">

<!-- FONT AWESOME ICONS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<style>
body { background:#05000a;color:#fff;font-family:sans-serif; text-align:center; padding:20px;}
input, select, button { padding:10px; margin:5px; border-radius:6px; border:none;}
button { cursor:pointer; background:#00ffff; color:#000; font-weight:bold;}
video { width:100%; max-width:500px; margin-top:20px; border-radius:12px;}
#result a { display:inline-block; margin:8px; padding:10px; border:2px solid #00ffff; color:#00ffff; text-decoration:none; border-radius:6px;}
#loading{display:none; font-weight:bold; margin-top:10px;}
</style>
</head>
<body>

<h1>Download Video TikTok</h1>

<input id="tiktokUrl" placeholder="https://vt.tiktok.com/xxxxx" style="width:60%;">
<select id="quality">
  <option value="hd">HD</option>
  <option value="sd">SD</option>
  <option value="hdnowm">HD Tanpa Watermark</option>
</select>
<button onclick="prepareDownload()">Download</button>

<div id="loading">Loading videoâ€¦ âš¡</div>
<div id="result"></div>

<script>
let selectedQuality = "hd";

function prepareDownload(){
    const url = document.getElementById("tiktokUrl").value.trim();
    selectedQuality = document.getElementById("quality").value;
    if(!url) return alert("Masukkan link TikTok");

    document.getElementById("loading").style.display = "block";
    document.getElementById("result").innerHTML = "";

    // Backend URL tetap diarahkan ke downloader99
    const backendURL = "https://downloader99.vercel.app/api/tiktok?url=" + encodeURIComponent(url);

    fetch(backendURL)
      .then(res => res.json())
      .then(data => {
          document.getElementById("loading").style.display = "none";
          if(data.error) return alert("Gagal download: " + data.error);

          // Pilih link video sesuai quality
          let videoLink;
          if(selectedQuality === "hdnowm") videoLink = data.video.hdplay || data.video.play;
          else if(selectedQuality === "hd") videoLink = data.video.hdplay || data.video.play;
          else videoLink = data.video.play;

          document.getElementById("result").innerHTML = `
            <video controls src="${videoLink}"></video><br>
            <a href="${videoLink}" download>â¬‡ Download Video</a>
            <a href="${data.music}" download>ðŸŽµ Download MP3</a>
          `;
      })
      .catch(err => {
          document.getElementById("loading").style.display = "none";
          alert("Gagal fetch backend: " + err.message);
          console.error(err);
      });
}
</script>

</body>
</html>
